# SUBSCRIBERS-MANAGER

Приложение для управления профилями абонентов. Представляет из себя web-сервис, который по номеру базовой станции будет отдавать список абонентов, которые в данный момент находятся на ней. Помимо номера телефона в ответе должен присутствовать профиль абонента.

### Использованные технологии

1. Spring Boot для быстрой "развертки" приложения
1. Spring MVC для реализации REST API
1. Apache Ignite в качестве базы данных
1. Apache-commons Validator для валидации Email
1. MockK для тестирования сервис-слоя приложения
1. Maven в качестве системы умной сборки

### Структура базы данных

* Таблица, содержащая связку носера базовой станции (Cell ID) с номером абонента (CTN).

cell_id_info

|Название поля|Тип|
| --- | --- |
|ctn|Long|
|cell_id|Long|

* Таблица, содержащая профили абонентов

sub_info

| Название поля | Тип |
| --- | --- |
| ctn | Long |
| name | String |
| email | String |
| activateDate | Timestamp |

NOTE: в обоих таблицах ctn является PRIMARY KEY из-за его уникальности в рамках данной задачи

## Установка и запуск приложения

### Требования перед установкой:

* Установить JDK 8+
* Установить Maven
* Установить Docker (+ docker-compose)
* Установить git

### Процесс установки
 
```
git clone https://github.com/musenth/subscribers-manager.git
cd subscribers-manager
docker-compose up
```

## Конфигурация и взаимодействие

### Описание основных системных перемен

|Название переменной в application.properties|Название переменной в ENV|Значение заданное по умолчанию|Описание| Обязательное поле ли нет |
| --- | --- | --- | --- | --- |
|logging.level.org.springframework.web|LOGGING_LEVEL_ORG_SPRINGFRAMEWORK_WEB|ERROR|Уровень логгирования для Spring Web|Нет|
|logging.level.com.interminable|LOGGING_LEVEL_COM_INTERMINABLE|DEBUG|Уровень логгирования для основного функционала приложения|Нет|
|sub.manager.jdbc.class-name|SUB_MANAGER_JDBC_CLASS_NAME|org.apache.ignite.IgniteJdbcDriver|Класс для подключения к БД через JDBC|Нет|
|sub.manager.jdbc.url|SUB_MANAGER_JDBC_URL|jdbc:ignite:thin://127.0.0.1|URL БД, к которой нужно подключиться|Нет|

### Описание API

|№|Маппинг запроса|Описание запроса|Параметры запроса|Описание параметров|
| ---- | --- | --- | --- | --- |
|1|addCell|добавляет связку ctn -> cell_id (многие к одному)|ctn|номер абонента|
| | | |cellId|номер базовой станции|
|2|addSub|добавляет информацию о профиле абонента|ctn|номер абонента|
| | | |name|имя|
| | | |email|электронная почта|
| | | |activateDate|дата активации|
|3|getCells|возвращает все связи ctn -> cell_id| | |
|4|getSubs|возвращает информацию о всех профилях абонентов| | |
|5|getSubsByCell|возвращает информацию о профилях абонентов с заданным номером базовой станции|cellId|номер базовой станции|

### Функционал, вне ТЗ, который хотелось бы здесь реализовать

1. Обработка ошибкок RestController'а для структуризации сообщений при исключительных ситуациях: в случае исключений на моей стороне через WEB API виден один тип сообщений, на стороне Spring - другой
1. Расширить функционал промежуточного фиксирования результатов работы функций для класса, работающего через JDBC - для более точного фиксирования ошибок при работе с БД

### Метаинформация

Выполнил: Peter - [Мой GitHub профиль](https://github.com/musenth) - mckinleypt@gmail.com
